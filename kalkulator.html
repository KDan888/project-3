<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Bootstrap - Zaidan</title>

    <!-- Penjelasan: Baris ini memanggil library Bootstrap CSS dari CDN agar tampilan website menggunakan komponen dan layout Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* Penjelasan: Mengatur gaya tampilan khusus untuk display kalkulator */
        #display {
            font-size: 2.5rem;
            text-align: right;
            height: 80px;
            padding: 10px;
        }
        /* Penjelasan: Membuat efek klik tombol */
        .btn-calc:active {
            transform: scale(0.95);
        }
    </style>
</head>

<body class="bg-light">

    <div class="container py-5">

        <!-- Penjelasan: Bagian ini membuat judul halaman dan identitas menggunakan komponen Bootstrap -->
        <div class="text-center mb-4">
            <h1 class="fw-bold">Kalkulator Modern</h1>
            <p class="text-muted">Nama: <strong>Zaidan Al Fahmi</strong> â€¢ NIM: <strong>1710524119</strong></p>
        </div>

        <!-- Penjelasan: Menggunakan komponen card Bootstrap sebagai pembungkus kalkulator -->
        <div class="card shadow mx-auto" style="max-width: 400px;">
            <div class="card-body">

                <!-- Penjelasan: Tempat menampilkan status dengan gambar (normal, sukses, error) -->
                <div class="mb-3">
                    <img id="statusImage"
                         src="https://placehold.co/350x80/0d6efd/FFFFFF?text=Kalkulator+Aktif"
                         class="img-fluid rounded"
                         alt="Status Kalkulator">
                </div>

                <!-- Penjelasan: Input tempat angka dan hasil perhitungan muncul -->
                <input type="text" id="display" class="form-control mb-3" placeholder="0" readonly>

                <!-- Penjelasan: Grid tombol kalkulator menggunakan Bootstrap row + col -->
                <div class="row g-2">

                    <!-- Tombol baris 1 -->
                    <div class="col-3"><button class="btn btn-danger w-100 btn-calc" data-value="C">C</button></div>
                    <div class="col-3"><button class="btn btn-secondary w-100 btn-calc" data-value="DEL">DEL</button></div>
                    <div class="col-3"><button class="btn btn-secondary w-100 btn-calc" data-value="%">%</button></div>
                    <div class="col-3"><button class="btn btn-primary w-100 btn-calc" data-value="/">/</button></div>

                    <!-- Tombol baris 2 -->
                    <div class="col-3"><button class="btn btn-dark w-100 btn-calc" data-value="7">7</button></div>
                    <div class="col-3"><button class="btn btn-dark w-100 btn-calc" data-value="8">8</button></div>
                    <div class="col-3"><button class="btn btn-dark w-100 btn-calc" data-value="9">9</button></div>
                    <div class="col-3"><button class="btn btn-primary w-100 btn-calc" data-value="*">*</button></div>

                    <!-- Tombol baris 3 -->
                    <div class="col-3"><button class="btn btn-dark w-100 btn-calc" data-value="4">4</button></div>
                    <div class="col-3"><button class="btn btn-dark w-100 btn-calc" data-value="5">5</button></div>
                    <div class="col-3"><button class="btn btn-dark w-100 btn-calc" data-value="6">6</button></div>
                    <div class="col-3"><button class="btn btn-primary w-100 btn-calc" data-value="-">-</button></div>

                    <!-- Tombol baris 4 -->
                    <div class="col-3"><button class="btn btn-dark w-100 btn-calc" data-value="1">1</button></div>
                    <div class="col-3"><button class="btn btn-dark w-100 btn-calc" data-value="2">2</button></div>
                    <div class="col-3"><button class="btn btn-dark w-100 btn-calc" data-value="3">3</button></div>
                    <div class="col-3"><button class="btn btn-primary w-100 btn-calc" data-value="+">+</button></div>

                    <!-- Tombol baris 5 -->
                    <div class="col-6"><button class="btn btn-dark w-100 btn-calc" data-value="0">0</button></div>
                    <div class="col-3"><button class="btn btn-dark w-100 btn-calc" data-value=".">.</button></div>
                    <div class="col-3"><button class="btn btn-success w-100 btn-calc" data-value="=">=</button></div>

                </div>

            </div>
        </div>
    </div>


    <!-- PENJELASAN: Memanggil Bootstrap JS agar beberapa komponen bisa bekerja -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


    <script>
        /* Penjelasan: Semua logika kalkulator dijalankan setelah halaman selesai dimuat */
        document.addEventListener('DOMContentLoaded', function() {

            // Penjelasan: Mengambil elemen penting yang dibutuhkan kalkulator
            const display = document.getElementById('display');
            const statusImage = document.getElementById('statusImage');
            const buttons = document.querySelectorAll('.btn-calc');

            // Penjelasan: Menyiapkan gambar status kalkulator
            const imgNormal = "https://placehold.co/350x80/0d6efd/FFFFFF?text=Kalkulator+Aktif";
            const imgSuccess = "https://placehold.co/350x80/198754/FFFFFF?text=Sukses!";
            const imgError = "https://placehold.co/350x80/dc3545/FFFFFF?text=Error!";

            // Penjelasan: Fungsi untuk mengubah gambar status
            function changeImage(state) {
                if (state === "success") {
                    statusImage.src = imgSuccess;
                } else if (state === "error") {
                    statusImage.src = imgError;
                } else {
                    statusImage.src = imgNormal;
                }
            }

            // Penjelasan: Membersihkan layar kalkulator
            function clearDisplay() {
                display.value = "";
                changeImage("normal");
            }

            // Penjelasan: Menghapus 1 karakter terakhir
            function deleteLastChar() {
                display.value = display.value.slice(0, -1);
            }

            // Penjelasan: Menambahkan karakter ke display
            function appendToDisplay(value) {
                display.value += value;
            }

            // Penjelasan: Proses perhitungan utama kalkulator
            function calculateResult() {

                if (display.value === "") {
                    changeImage("error");
                    display.value = "Kosong!";
                    setTimeout(clearDisplay, 1500);
                    return;
                }

                try {
                    let result = eval(display.value.replace(/%/g, "/100"));

                    if (isFinite(result)) {
                        display.value = result;
                        changeImage("success");
                    } else {
                        throw new Error("Invalid");
                    }

                } catch (err) {
                    display.value = "Error!";
                    changeImage("error");
                    setTimeout(clearDisplay, 1500);
                }
            }

            // Penjelasan: Event ketika tombol di-klik
            buttons.forEach(btn => {
                btn.addEventListener("click", () => {

                    const value = btn.getAttribute("data-value");

                    switch(value) {
                        case "C":
                            clearDisplay();
                            break;
                        case "DEL":
                            deleteLastChar();
                            break;
                        case "=":
                            calculateResult();
                            break;
                        default:
                            appendToDisplay(value);
                            break;
                    }
                });
            });

        });
    </script>

</body>
</html>
